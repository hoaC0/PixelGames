<div class="main-container">
    <div class="top-sale"><h1>Browse the top Games...</h1></div>
    <div class="top-sale-games-container">
        @if (store.loading()) {
            <p>Loading...</p>
        } @else if (visibleGames().length > 0) {
            <div class="top-sale-games">

                <div class="button">
                    <button 
                        class="nav-arrow" 
                        (click)="manualNavigation('prev')">
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                </div>
                
                @for (game of visibleGames(); track game.id) {
                    <div class="game">
                        <div class="game-image">
                            <img [src]="game.background_image" [alt]="game.name" class="game-image">
                        </div>
                        <div class="game-title"><h1>{{ game.name }}</h1></div>
                        <div class="game-price"><p>Rating: {{ game.rating }}</p></div>
                    </div>
                }
                
                <div class="button">
                    <button 
                        class="nav-arrow" 
                        (click)="manualNavigation('next')">
                        <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            
            <div class="progress-indicators">
                @for (page of [].constructor(totalPages()); track $index) {
                    <div 
                        class="progress-indicator"
                        [class.active]="$index === store.currentPage()"
                        (click)="goToPage($index)">
                        <div class="progress-bar">
                            <div 
                                class="progress-fill"
                                [style.width.%]="$index === store.currentPage() ? progressPercentage : ($index < store.currentPage() ? 100 : 0)">
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>